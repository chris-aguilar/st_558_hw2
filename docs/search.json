[
  {
    "objectID": "st_558_hw_2.html",
    "href": "st_558_hw_2.html",
    "title": "ST 558 HW 2: Programming in Base R",
    "section": "",
    "text": "We first create some data to work with, then we assign subject names to each vector of data.\n\n# Make data\npre_treatment &lt;- c(130, 128, 116, 124, 133, 134, 118, 126, 114, 127, 141, 138, 128, 140, 137, 131, 120, 128, 139, 135)\n\npost_treatment &lt;- c(114, 98, 113, 99, 107, 116, 113, 111, 119, 117, 101, 119, 130, 122, 106, 106, 124, 102, 117, 113)\n\n# create names vector\nsubj_names &lt;- paste(\"Subject\", 1:20, sep = \"_\")\n\n# assign names to each set of subjects\nnames(pre_treatment) &lt;- subj_names\nnames(post_treatment) &lt;- subj_names\n\nNext we take the difference between blood pressures pre_treatment and post_treatment, and find the average difference.\n\ntreatment_diffs &lt;- pre_treatment - post_treatment\n\navg_diff &lt;- mean(treatment_diffs)\n\navg_diff\n\n[1] 17\n\n\nWe now find the patients that experienced a decrease in blood pressure.\n\n# Find indices\nbp_decrease_idx &lt;- which(treatment_diffs &gt; 0)\n\npos_change_diffs &lt;- treatment_diffs[bp_decrease_idx]\n\npos_change_diffs\n\n Subject_1  Subject_2  Subject_3  Subject_4  Subject_5  Subject_6  Subject_7 \n        16         30          3         25         26         18          5 \n Subject_8 Subject_10 Subject_11 Subject_12 Subject_14 Subject_15 Subject_16 \n        15         10         40         19         18         31         25 \nSubject_18 Subject_19 Subject_20 \n        26         22         22 \n\n\nNow, we find the average positive change.\n\nmean(pos_change_diffs)\n\n[1] 20.64706"
  },
  {
    "objectID": "st_558_hw_2.html#task-1-basic-vector-practice",
    "href": "st_558_hw_2.html#task-1-basic-vector-practice",
    "title": "ST 558 HW 2: Programming in Base R",
    "section": "",
    "text": "We first create some data to work with, then we assign subject names to each vector of data.\n\n# Make data\npre_treatment &lt;- c(130, 128, 116, 124, 133, 134, 118, 126, 114, 127, 141, 138, 128, 140, 137, 131, 120, 128, 139, 135)\n\npost_treatment &lt;- c(114, 98, 113, 99, 107, 116, 113, 111, 119, 117, 101, 119, 130, 122, 106, 106, 124, 102, 117, 113)\n\n# create names vector\nsubj_names &lt;- paste(\"Subject\", 1:20, sep = \"_\")\n\n# assign names to each set of subjects\nnames(pre_treatment) &lt;- subj_names\nnames(post_treatment) &lt;- subj_names\n\nNext we take the difference between blood pressures pre_treatment and post_treatment, and find the average difference.\n\ntreatment_diffs &lt;- pre_treatment - post_treatment\n\navg_diff &lt;- mean(treatment_diffs)\n\navg_diff\n\n[1] 17\n\n\nWe now find the patients that experienced a decrease in blood pressure.\n\n# Find indices\nbp_decrease_idx &lt;- which(treatment_diffs &gt; 0)\n\npos_change_diffs &lt;- treatment_diffs[bp_decrease_idx]\n\npos_change_diffs\n\n Subject_1  Subject_2  Subject_3  Subject_4  Subject_5  Subject_6  Subject_7 \n        16         30          3         25         26         18          5 \n Subject_8 Subject_10 Subject_11 Subject_12 Subject_14 Subject_15 Subject_16 \n        15         10         40         19         18         31         25 \nSubject_18 Subject_19 Subject_20 \n        26         22         22 \n\n\nNow, we find the average positive change.\n\nmean(pos_change_diffs)\n\n[1] 20.64706"
  },
  {
    "objectID": "st_558_hw_2.html#task-2-basic-data-frame-practice",
    "href": "st_558_hw_2.html#task-2-basic-data-frame-practice",
    "title": "ST 558 HW 2: Programming in Base R",
    "section": "Task 2: Basic Data Frame Practice",
    "text": "Task 2: Basic Data Frame Practice\nCreating a data frame to reflect the data above.\n\nblood_pressures &lt;- data.frame(\n  patient = subj_names,\n  pre_bp = pre_treatment,\n  post_bp = post_treatment,\n  diff_bp = pre_treatment - post_treatment)\n\nWeâ€™ll now look at a subset of the data where diff_bp is negative.\n\nsubset(blood_pressures, diff_bp &lt; 0)\n\n              patient pre_bp post_bp diff_bp\nSubject_9   Subject_9    114     119      -5\nSubject_13 Subject_13    128     130      -2\nSubject_17 Subject_17    120     124      -4\n\n\nWe now add a logical column to see which post_treatment blood pressures are less than 120, then we print the dataframe with knittr::kable()\n\nblood_pressures$post_bp_lt_120 &lt;- blood_pressures$post_bp &lt; 120\n\nknitr::kable(blood_pressures)\n\n\n\n\n\npatient\npre_bp\npost_bp\ndiff_bp\npost_bp_lt_120\n\n\n\n\nSubject_1\nSubject_1\n130\n114\n16\nTRUE\n\n\nSubject_2\nSubject_2\n128\n98\n30\nTRUE\n\n\nSubject_3\nSubject_3\n116\n113\n3\nTRUE\n\n\nSubject_4\nSubject_4\n124\n99\n25\nTRUE\n\n\nSubject_5\nSubject_5\n133\n107\n26\nTRUE\n\n\nSubject_6\nSubject_6\n134\n116\n18\nTRUE\n\n\nSubject_7\nSubject_7\n118\n113\n5\nTRUE\n\n\nSubject_8\nSubject_8\n126\n111\n15\nTRUE\n\n\nSubject_9\nSubject_9\n114\n119\n-5\nTRUE\n\n\nSubject_10\nSubject_10\n127\n117\n10\nTRUE\n\n\nSubject_11\nSubject_11\n141\n101\n40\nTRUE\n\n\nSubject_12\nSubject_12\n138\n119\n19\nTRUE\n\n\nSubject_13\nSubject_13\n128\n130\n-2\nFALSE\n\n\nSubject_14\nSubject_14\n140\n122\n18\nFALSE\n\n\nSubject_15\nSubject_15\n137\n106\n31\nTRUE\n\n\nSubject_16\nSubject_16\n131\n106\n25\nTRUE\n\n\nSubject_17\nSubject_17\n120\n124\n-4\nFALSE\n\n\nSubject_18\nSubject_18\n128\n102\n26\nTRUE\n\n\nSubject_19\nSubject_19\n139\n117\n22\nTRUE\n\n\nSubject_20\nSubject_20\n135\n113\n22\nTRUE"
  },
  {
    "objectID": "st_558_hw_2.html#task-3-list-practice",
    "href": "st_558_hw_2.html#task-3-list-practice",
    "title": "ST 558 HW 2: Programming in Base R",
    "section": "Task 3: List Practice",
    "text": "Task 3: List Practice\nWe now look at data where the treatment is a placebo. We then create a dataframe similar to the treatment data above, using placebo data.\n\npre_placebo &lt;- c(138, 135, 147, 117, 152, 134, 114, 121, 131, 130)\n\npost_placebo &lt;- c(105, 136, 123, 130, 134, 143, 135, 139, 120, 124)\n\nplacebo_bp &lt;- data.frame(\n  patient = subj_names,\n  pre_bp = pre_placebo,\n  post_bp = post_placebo,\n  diff_bp = pre_placebo - post_placebo,\n  post_bp_lt_120 = post_placebo &gt; 120\n)\n\nWe now place these two dataframes in a list and practice accessing list elements.\n\ntreatments_list &lt;- list(treatment = blood_pressures, placebo = placebo_bp)\n\n# accessing first element, the treatment df in 3 diff ways\ntreatments_list[[\"treatment\"]]\n\n              patient pre_bp post_bp diff_bp post_bp_lt_120\nSubject_1   Subject_1    130     114      16           TRUE\nSubject_2   Subject_2    128      98      30           TRUE\nSubject_3   Subject_3    116     113       3           TRUE\nSubject_4   Subject_4    124      99      25           TRUE\nSubject_5   Subject_5    133     107      26           TRUE\nSubject_6   Subject_6    134     116      18           TRUE\nSubject_7   Subject_7    118     113       5           TRUE\nSubject_8   Subject_8    126     111      15           TRUE\nSubject_9   Subject_9    114     119      -5           TRUE\nSubject_10 Subject_10    127     117      10           TRUE\nSubject_11 Subject_11    141     101      40           TRUE\nSubject_12 Subject_12    138     119      19           TRUE\nSubject_13 Subject_13    128     130      -2          FALSE\nSubject_14 Subject_14    140     122      18          FALSE\nSubject_15 Subject_15    137     106      31           TRUE\nSubject_16 Subject_16    131     106      25           TRUE\nSubject_17 Subject_17    120     124      -4          FALSE\nSubject_18 Subject_18    128     102      26           TRUE\nSubject_19 Subject_19    139     117      22           TRUE\nSubject_20 Subject_20    135     113      22           TRUE\n\ntreatments_list[[1]]\n\n              patient pre_bp post_bp diff_bp post_bp_lt_120\nSubject_1   Subject_1    130     114      16           TRUE\nSubject_2   Subject_2    128      98      30           TRUE\nSubject_3   Subject_3    116     113       3           TRUE\nSubject_4   Subject_4    124      99      25           TRUE\nSubject_5   Subject_5    133     107      26           TRUE\nSubject_6   Subject_6    134     116      18           TRUE\nSubject_7   Subject_7    118     113       5           TRUE\nSubject_8   Subject_8    126     111      15           TRUE\nSubject_9   Subject_9    114     119      -5           TRUE\nSubject_10 Subject_10    127     117      10           TRUE\nSubject_11 Subject_11    141     101      40           TRUE\nSubject_12 Subject_12    138     119      19           TRUE\nSubject_13 Subject_13    128     130      -2          FALSE\nSubject_14 Subject_14    140     122      18          FALSE\nSubject_15 Subject_15    137     106      31           TRUE\nSubject_16 Subject_16    131     106      25           TRUE\nSubject_17 Subject_17    120     124      -4          FALSE\nSubject_18 Subject_18    128     102      26           TRUE\nSubject_19 Subject_19    139     117      22           TRUE\nSubject_20 Subject_20    135     113      22           TRUE\n\ntreatments_list$treatment\n\n              patient pre_bp post_bp diff_bp post_bp_lt_120\nSubject_1   Subject_1    130     114      16           TRUE\nSubject_2   Subject_2    128      98      30           TRUE\nSubject_3   Subject_3    116     113       3           TRUE\nSubject_4   Subject_4    124      99      25           TRUE\nSubject_5   Subject_5    133     107      26           TRUE\nSubject_6   Subject_6    134     116      18           TRUE\nSubject_7   Subject_7    118     113       5           TRUE\nSubject_8   Subject_8    126     111      15           TRUE\nSubject_9   Subject_9    114     119      -5           TRUE\nSubject_10 Subject_10    127     117      10           TRUE\nSubject_11 Subject_11    141     101      40           TRUE\nSubject_12 Subject_12    138     119      19           TRUE\nSubject_13 Subject_13    128     130      -2          FALSE\nSubject_14 Subject_14    140     122      18          FALSE\nSubject_15 Subject_15    137     106      31           TRUE\nSubject_16 Subject_16    131     106      25           TRUE\nSubject_17 Subject_17    120     124      -4          FALSE\nSubject_18 Subject_18    128     102      26           TRUE\nSubject_19 Subject_19    139     117      22           TRUE\nSubject_20 Subject_20    135     113      22           TRUE\n\n\nUsing one line of code, we access the placebo_bpâ€™s pre_bp column.\n\ntreatments_list$placebo$pre_bp\n\n [1] 138 135 147 117 152 134 114 121 131 130 138 135 147 117 152 134 114 121 131\n[20] 130"
  },
  {
    "objectID": "st_558_hw_2.html#task-4-control-flow-practice",
    "href": "st_558_hw_2.html#task-4-control-flow-practice",
    "title": "ST 558 HW 2: Programming in Base R",
    "section": "Task 4: Control Flow Practice",
    "text": "Task 4: Control Flow Practice\nWe categorize post_treatment (or placebo) blood pressures and append this categorization to the data frames with a for-loop.\n\n# Adding status column\ntreatments_list$treatment$status &lt;- character(20)\ntreatments_list$placebo$status &lt;- character(20)\n\n# Post treatment BPs and categories\nfor(i in 1:nrow(treatments_list$treatment)) {\n  treatments_list$treatment$status[[i]] &lt;- ifelse(\n    treatments_list$treatment$post_bp[[i]] &lt;= 120, \"Optimal\", \n      ifelse(\n        treatments_list$treatment$post_bp[[i]] &gt; 120 &\n        treatments_list$treatment$post_bp[[i]] &lt;= 130, \"Borderline\", \"High\"\n        )\n    )\n}\n\ntreatments_list$treatment\n\n              patient pre_bp post_bp diff_bp post_bp_lt_120     status\nSubject_1   Subject_1    130     114      16           TRUE    Optimal\nSubject_2   Subject_2    128      98      30           TRUE    Optimal\nSubject_3   Subject_3    116     113       3           TRUE    Optimal\nSubject_4   Subject_4    124      99      25           TRUE    Optimal\nSubject_5   Subject_5    133     107      26           TRUE    Optimal\nSubject_6   Subject_6    134     116      18           TRUE    Optimal\nSubject_7   Subject_7    118     113       5           TRUE    Optimal\nSubject_8   Subject_8    126     111      15           TRUE    Optimal\nSubject_9   Subject_9    114     119      -5           TRUE    Optimal\nSubject_10 Subject_10    127     117      10           TRUE    Optimal\nSubject_11 Subject_11    141     101      40           TRUE    Optimal\nSubject_12 Subject_12    138     119      19           TRUE    Optimal\nSubject_13 Subject_13    128     130      -2          FALSE Borderline\nSubject_14 Subject_14    140     122      18          FALSE Borderline\nSubject_15 Subject_15    137     106      31           TRUE    Optimal\nSubject_16 Subject_16    131     106      25           TRUE    Optimal\nSubject_17 Subject_17    120     124      -4          FALSE Borderline\nSubject_18 Subject_18    128     102      26           TRUE    Optimal\nSubject_19 Subject_19    139     117      22           TRUE    Optimal\nSubject_20 Subject_20    135     113      22           TRUE    Optimal\n\n# Placebo BPs and categories\nfor(i in 1:nrow(treatments_list$placebo)) {\n  treatments_list$placebo$status[[i]] &lt;- ifelse(\n    treatments_list$placebo$post_bp[[i]] &lt;= 120, \"Optimal\", \n      ifelse(\n        treatments_list$placebo$post_bp[[i]] &gt; 120 &\n        treatments_list$placebo$post_bp[[i]] &lt;= 130, \"Borderline\", \"High\"\n        )\n    )\n}\n\ntreatments_list$placebo\n\n      patient pre_bp post_bp diff_bp post_bp_lt_120     status\n1   Subject_1    138     105      33          FALSE    Optimal\n2   Subject_2    135     136      -1           TRUE       High\n3   Subject_3    147     123      24           TRUE Borderline\n4   Subject_4    117     130     -13           TRUE Borderline\n5   Subject_5    152     134      18           TRUE       High\n6   Subject_6    134     143      -9           TRUE       High\n7   Subject_7    114     135     -21           TRUE       High\n8   Subject_8    121     139     -18           TRUE       High\n9   Subject_9    131     120      11          FALSE    Optimal\n10 Subject_10    130     124       6           TRUE Borderline\n11 Subject_11    138     105      33          FALSE    Optimal\n12 Subject_12    135     136      -1           TRUE       High\n13 Subject_13    147     123      24           TRUE Borderline\n14 Subject_14    117     130     -13           TRUE Borderline\n15 Subject_15    152     134      18           TRUE       High\n16 Subject_16    134     143      -9           TRUE       High\n17 Subject_17    114     135     -21           TRUE       High\n18 Subject_18    121     139     -18           TRUE       High\n19 Subject_19    131     120      11          FALSE    Optimal\n20 Subject_20    130     124       6           TRUE Borderline"
  },
  {
    "objectID": "st_558_hw_2.html#task-5-function-writing",
    "href": "st_558_hw_2.html#task-5-function-writing",
    "title": "ST 558 HW 2: Programming in Base R",
    "section": "Task 5: Function Writing",
    "text": "Task 5: Function Writing\nWe expect to receive similar data in the future and it can be time-consuming to manually code up solutions for each set of data. Weâ€™ll be interested in different statistics for the pre, post, and diff columns from both data frames, so we should write a function to extract these quickly.\nOur function will expect a list of dataframes with the columns pre_bp, post_bp, and diff_bp in each data frame. It will also take a stat argument, set to \"mean\" by default.\n\nstat_maker &lt;- function(x, stat = \"mean\") {\n  \n  my_fun &lt;- get(stat)\n  \n  # variables of interest\n  vars &lt;- c(\"pre_bp\", \"post_bp\", \"diff_bp\")\n  \n  # creating output containers, one per dataframe containing one slot per variable\n  treatment_stats &lt;- vector(\"numeric\", 3)\n  placebo_stats &lt;- vector(\"numeric\", 3)\n  \n  # looping through the treatment data frame for the stat of interest\n  for(i in seq_along(vars)) {\n    treatment_stats[[i]] &lt;- my_fun(x$treatment[[vars[i]]])\n  }\n  \n  # looping through the placebo data frame for the stat of interest\n  for(i in seq_along(vars)) {\n    placebo_stats[[i]] &lt;- my_fun(x$placebo[[vars[i]]])\n  }\n  \n  # generating stat names for treatment, placebo variables of interest\n  treatment_names &lt;- paste(\"treatment\", vars, stat, sep = \"_\")\n  placebo_names &lt;- paste(\"placebo\", vars, stat, sep = \"_\")\n  \n  # combining treatment and placebo stats in order\n  all_stats &lt;- c(treatment_stats, placebo_stats)\n  \n  # assigning element names\n  names(all_stats) &lt;- c(treatment_names, placebo_names)\n  \n  all_stats\n}\n\nNow we use our function to compute the mean, variance, standard deviation, minimum, and maximum of each variable of interest.\n\n# mean, left as default\nstat_maker(treatments_list)\n\n treatment_pre_bp_mean treatment_post_bp_mean treatment_diff_bp_mean \n                129.35                 112.35                  17.00 \n   placebo_pre_bp_mean   placebo_post_bp_mean   placebo_diff_bp_mean \n                131.90                 128.90                   3.00 \n\n# variance\nstat_maker(treatments_list, \"var\")\n\n treatment_pre_bp_var treatment_post_bp_var treatment_diff_bp_var \n             64.55526              74.76579             153.68421 \n   placebo_pre_bp_var   placebo_post_bp_var   placebo_diff_bp_var \n            141.98947             118.41053             323.36842 \n\n# standard deviation\nstat_maker(treatments_list, \"sd\")\n\n treatment_pre_bp_sd treatment_post_bp_sd treatment_diff_bp_sd \n            8.034629             8.646721            12.396944 \n   placebo_pre_bp_sd   placebo_post_bp_sd   placebo_diff_bp_sd \n           11.915934            10.881660            17.982448 \n\n# min\nstat_maker(treatments_list, \"min\")\n\n treatment_pre_bp_min treatment_post_bp_min treatment_diff_bp_min \n                  114                    98                    -5 \n   placebo_pre_bp_min   placebo_post_bp_min   placebo_diff_bp_min \n                  114                   105                   -21 \n\n# max\nstat_maker(treatments_list, \"max\")\n\n treatment_pre_bp_max treatment_post_bp_max treatment_diff_bp_max \n                  141                   130                    40 \n   placebo_pre_bp_max   placebo_post_bp_max   placebo_diff_bp_max \n                  152                   143                    33 \n\n\nThe end. Thank you for reading! ðŸ“–"
  }
]